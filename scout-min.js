(function(e){var t=function(){function l(){}function c(e){e=e||[];var t=new l;t.concat(e);return t}function h(e,t){var l=[];t=t||document;if(typeof e===u){return c(l)}else if(typeof e===o){if(/^\s*<(\w+)[^>]*>/.test(e))l=v(e);else l=p(t,e)}else if(typeof e===r){h.fn.ready(e)}else if(e instanceof Array){if(e.ready)return e;if(e.every(function(e){return typeof e===o})){for(f=0;f<e.length;f++)l=l.concat(p(t,e[f]))}else if(e.every(function(e){return typeof e===s})){return c(e)}else if(e.length==2&&e.every(function(e){return typeof e===i})){l=n.elementFromPoint(e[0],e[1])}}else if(e.nodeType==1||e.nodeType==3||e.nodeType==9||e===a){l=[e]}return c(l)}function p(e,t){var r;if(/^\.([\w-]+)$/.test(t)){r=e.getElementsByClassName(RegExp.$1)}else if(/^#([\w-]+)$/.test(t)){r=n.getElementById(RegExp.$1);return r?[r]:[]}else if(/^[\w]+$/.test(t)){r=e.getElementsByTagName(t)}else{r=e.querySelectorAll(t)}return d(r)}function d(e){var t=[];for(var n=e.length;n--;t.unshift(e[n])){}return t}function v(t){var r=n.createElement("div");r.insertAdjacentHTML("beforeend",t);return e.slice.call(d(r.childNodes),0)}function m(e,t,n,i){return typeof t===r?t.call(e,n,i):t}function g(e){var t="_data";if(typeof e[t]!=="object"){Object.defineProperty(e,t,{value:{}})}return e[t]}var e=[],t="boolean",n=document,r="function",i="number",s="object",o="string",u="undefined",a=window,f=0;l.prototype=new Array;h.VERSION="1.0.0";h.extend=function(e,t,n,r){if(e!==true){r=n;n=t;t=e;e=false}if(!n){return null}for(var i in n){if(e&&typeof n[i]===s&&n[i]!==null){t[i]=t[i]||{};arguments.callee(t[i],n[i])}else{t[i]=n[i]}}if(r){for(var o=0;o<r.length;o++){delete t[r[o]]}}return t};h.register=function(e){e=e||h.fn;h.extend(l.prototype,e)};h.data=function(e,t,n){var r=g(e);if(typeof t===u){return r}else if(typeof n===u){var i=r[t];if(typeof i===u){i=e.getAttribute("data-"+t);return i===null?undefined:i}return i}else{r[t]=n;return n}};h.removeData=function(e,t){var n=g(e);if(typeof t===u){for(var r in n){delete n[r]}}else{delete n[t]}};h.inArray=function(e,t){return t.indexOf(e)};h.automap=function(e,t){if(arguments.length!==2)return;var n={};var r;for(r in t){if(e.hasOwnProperty(r)){n[r]=t[r]}}for(r in e){if(!n.hasOwnProperty(r)){n[r]=e[r]}}return n};h.log=function(e,t){t=t||false;if(typeof console==="undefined"||t){h("p.log-output").append(e+"<br/>")}else if(typeof console.log==="function"){console.log.call(console,e)}else{Function.prototype.bind.call(console.log,console).call(console,e)}};h.defer=function(){function n(n,r,i){e.push({ctx:n,f:r,a:i});window.postMessage(t,"*")}function r(n){if(n.data==t){n.stopPropagation();if(e.length>0){var r=e.shift();r.a=r.a||[];r.f.apply(r.ctx,r.a)}}}var e=[],t="defer-msg";window.addEventListener("message",r,true);return n}();h.vendorStyle=function(){function i(t){if(e[t])return e[t];for(var i=0;i<r.length;i++){var s=r[i]+t;if(typeof n[s]!==u){e[t]=s;return s}}return t}var e={},t=document.createElement("div"),n=window.getComputedStyle(t),r=["","-webkit-","-moz-","-ms-","-o-"];t=null;return i}();var y={"column-count":true,"fill-opacity":true,"font-weight":true,opacity:true,orphans:true,widows:true,"z-index":true,zoom:true};h.fn={ready:function(e){function s(){return/complete|loaded/.test(n[t])}function o(t){if(s()){n.removeEventListener(i,o,false);n.removeEventListener(r,o,false);e(h)}}var t="readyState",r="readystatechange",i="DOMContentLoaded";if(s()){e(h)}else{n.addEventListener(i,o,false);n.addEventListener(r,o,false)}return this},each:function(e){this.forEach(function(t,n,r){e.call(t,t,n,r)});return this},concat:function(){var e;for(e=0;e<arguments.length;e++){var t,n=arguments[e];if(n instanceof Array){for(t=0;t<n.length;t++){this.push(n[t])}}else{this.push(n)}}return this},data:function(e,t){if(typeof e===s){for(var n in e){this.data(n,e[n])}}else if(typeof t===u){return this.length>0?h.data(this[0],e):null}else{this.each(function(n){h.data(n,e,t)})}return t},removeData:function(){var e=arguments[0]instanceof Array?arguments[0]:arguments;if(e.length==0){this.each(function(e){h.removeData(e)})}else{for(var t=0;t<e.length;t++){this.each(function(n){h.removeData(n,e[t])})}}return this},filter:function(t){return h(filtered=e.filter.call(this,t))},join:function(t,n){if(typeof n===u){return e.join.call(this,t||",")}else{var r="";this.forEach(function(e,i,s){r+=h(e).attr(n)+(t||",")});return r.substr(0,r.length-1)}},lastIndexOf:function(t){var n;if(typeof t===u){return u}else{return e.lastIndexOf.call(this,(n=h(t))[n.length-1])}},map:function(e,t){var n=[],r;for(r=0;r<this.length;r++){var i=e.call(t||this,this[r]);if(i)n.push(i)}return c(n)},pop:function(){var t=e.pop.call(this);return c([t])},push:function(){var t,n,r;for(t=0;t<arguments.length;t++){r=arguments[t];if(r instanceof Array){for(n=0;n<r.length;n++){e.push.call(this,r[n])}}else{e.push.call(this,r)}}return this.length},scrollLeft:function(e){if(typeof e===u)return this[0].scrollLeft;this[0].scrollLeft=e},scrollTop:function(e){if(typeof e===u)return this[0].scrollTop;this[0].scrollTop=e},shift:function(){var t=e.shift.call(this);return c([t])},hide:function(){return this.css("display","none")},show:function(){return this.css("display","")},slice:function(t,n){return c(e.slice.call(this,t,n||this.length))},splice:function(){var t=arguments[0],n=arguments[1],r=d(arguments).slice(2),i=e.splice.call(this,t,n),s;r=r.length==1&&r[0].length&&r[0];if(r.length>0){for(s=r.length-1;s>=0;s--){e.splice.call(this,t,0,r[s])}}return c(i)},unshift:function(){var t,n,r;for(t=0;t<arguments.length;t++){r=arguments[t];if(r instanceof Array){for(n=0;n<r.length;n++){e.unshift.call(this,r[n])}}else{e.unshift.call(this,r)}}return this.length},attr:function(e,t){if(this.length==0)return undefined;if(typeof e===o&&typeof t===u){var n=this[0].getAttribute(e);if(n==null)return undefined;if(n.charAt(0)=="{"||n.charAt(0)=="["){try{n=JSON.parse(n)}catch(r){return n}}return n}else{this.each(function(n,r,i){if(typeof e===s){for(prop in e)n.setAttribute(prop,e[prop])}else{n.setAttribute(e,m(n,t,r,n.getAttribute(e)))}});return this}},removeAttr:function(e){if(typeof e==="string"){this.each(function(t){t.removeAttribute(e)})}return this},prop:function(e,t){if(this.length==0)return undefined;if(arguments.length==2){this.each.call(this,function(n,r,i){n[e]=t})}else return this[0][e];return this},val:function(){if(this.length==0)return undefined;return this[0].value},html:function(e){if(typeof e===u){return this[0].innerHTML}else{this.each.call(this,function(t,n,r){h(t).empty().append(m(t,e,n))});return this}},text:function(e){if(typeof e===u){if(this.length==0)return undefined;else return this[0].textContent}else if(typeof e===o){this.each.call(this,function(t,n,r){t.textContent=e})}else if(typeof e===r){this.each.call(this,function(t,n,r){t.textContent=m(this,e,n,t.textContent)})}else{this.each.call(this,function(t,n,r){t.textContent=e.toString()})}return this},append:function(e){var t=this.length;if(t>0){if(typeof e===o)e=v(e);this.each.call(this,function(t,n,r){if(e instanceof Array){for(var i=0;i<e.length;i++){t.appendChild(e[i])}}else{t.appendChild(e)}})}return this},appendTo:function(e){this.each.call(this,function(t,n,r){h(e).append(t)});return this},prepend:function(e){var t=this.length;if(t>0){if(typeof e===o)e=v(e);this.each.call(this,function(t,n,r){if(e instanceof Array){var i=h(t).children()[0];for(var s=0;s<e.length;s++){t.insertBefore(e[s],i)}}else{t.insertBefore(e,h(t).children()[0])}})}return this},prependTo:function(e){this.each.call(this,function(t,n,r){h(e).prepend(t)});return this},before:function(e){var t=this.length;if(t>0){if(typeof e===o)e=v(e);this.each.call(this,function(t,n,r){for(var i=0;i<e.length;i++){t.parentNode.insertBefore(e[i],t)}})}return this},after:function(e){var t=this.length;if(t>0){if(typeof e===o)e=v(e);this.each.call(this,function(t,n,r){for(var i=0;i<e.length;i++){t.parentNode.insertBefore(e[i],t.nextSibling)}})}return this},replaceWith:function(e){this.each.call(this,function(t,n,r){h(t).before(e).remove()});return this},empty:function(){this.each.call(this,function(e,t,n){e.innerHTML=""});return this},parent:function(){if(this.length==0)return undefined;return h(this[0].parentNode)},children:function(t){if(this.length==0)return undefined;return c(e.slice.call(typeof t===u?d(this[0].children):d(h(t)[0].children)))},siblings:function(t){function n(e,t){return t.filter(function(t,n,r){return e!==t})}return c(e.slice.call(typeof t===u?n(this[0],d(this[0].parentNode.children)):n(h(t)[0],d(h(t)[0].parentNode.children))))},find:function(e){var t=[];if(this.length==0||typeof e===u){return c()}else{this.each.call(this,function(n,r,i){t=t.concat(p(n,e))})}return c(t)},closest:function(e,t){function s(e){if(i.indexOf(e)>-1){r=h(e)}else{if(e!==t&&e!==n)r=e.parentNode;s(r)}}var r=this[0],i=p(t||n,e);if(i.length<1)r=h();else s(r);return r},remove:function(){this.each.call(this,function(e,t,n){if(e.parentNode!=null){e.parentNode.removeChild(e)}});return this},css:function(e,t){function n(e,t){return typeof t===i&&!y[e]?t+"px":t}if(typeof e===o&&typeof t===u){if(this.length==0)return undefined;return a.getComputedStyle(this[0],null).getPropertyValue(h.vendorStyle(e))}else{var r="";if(typeof e===o){var s=h.vendorStyle(e);if(t===""){this.each.call(this,function(e){e.style.removeProperty(s)})}else{r=s+":"+n(e,t)+";"}}else{for(var f in e){var s=h.vendorStyle(f);if(e[f]===""){this.each.call(this,function(e,t,n){e.style.removeProperty(s)})}else{r+=s+":"+n(f,e[f])+";"}}}this.each.call(this,function(e,t,n){e.style.cssText+=r});return this}},hasClass:function(e){if("classList"in n.documentElement){return this[0].classList.contains(e)}else{var t=this[0].className,r=new RegExp(e);return r.test(t)}},addClass:function(e){this.each.call(this,function(t,r,i){if("classList"in n.documentElement){t.classList.add(e)}else{if(!h(t).hasClass(e)){var s=t.className;t.className=s+" "+e}}});return this},removeClass:function(e){this.each.call(this,function(t,r,i){if("classList"in n.documentElement){t.classList.remove(e)}else{if(h(t).hasClass(e)){var s=t.className.split(/\s+/),r=s.indexOf(e),o;s.splice(r,1);o=s.join(" ");t.className=o}}});return this},toggleClass:function(e){this.each.call(this,function(t,r,i){if("classList"in n.documentElement){t.classList.toggle(e)}else{if(h(t).hasClass(e)){h(t).removeClass(e)}else{h(t).addClass(e)}}});return this},copyStyle:function(e){this.each.call(this,function(t,n,r){t.style.cssText=e.style.cssText});return this},height:function(){var e,t;if(this.length==0)return undefined;return this[0].offsetHeight||this[0].height},width:function(){var e,t;if(this.length==0)return undefined;return this[0].offsetWidth||this[0].width},serialize:function(){function t(e,n){if(n instanceof l||Array.isArray(n)){for(var r=0;r<n.length;r++)e=t(e,n[r]);return e}else if(n.tagName==="FORM"){return t(e,h(n).find("input,select,textarea,button"))}else if(n.name){var i=encodeURIComponent(n.type.toLowerCase()=="checkbox"?!!n.checked:n.value);return e+=(e.length>0?"&":"")+encodeURIComponent(n.name)+"="+i}else return e}var e="";return t("",this)}};if(typeof Function.prototype.bind!==r){Function.prototype.bind=function(){var e=this,t=Array.prototype.slice.call(arguments),n=t.shift();return function(){return e.apply(n,t.concat(Array.prototype.slice.call(arguments)))}}}h.register(h.fn);return h};var n=t();e.S=e.Scout=n;"$"in e||(e.$=n);if(typeof e.define!=="undefined"&&e.define!==null?e.define.amd:void 0){return e.define("scout",[],function(){return t()})}})(window);(function(e){var t=function(e){e.ajax=function(t,n){var r=new XMLHttpRequest,i={url:null,context:r,method:"GET",headers:{},responseType:"json",data:null,timeout:0,progress:function(){},timeoutHandler:function(){},success:function(){},complete:function(){},error:function(){}},s=false,o,u;if(typeof t==="string"){i.url=t}else if(typeof t==="object"){n=t}i.headers["Accept"]="*/*";i.headers["Content-Type"]="application/x-www-form-urlencoded";i.headers["X-Requested-With"]="XMLHttpRequest";n=n||i;n=e.automap(i,n);if(n.url===null)throw new Error("no url was provided for ajax call");if(n.url.indexOf(window.location.hostname)>-1)s=true;var a=new e.Deferred;if(!("withCredentials"in r)&&window.XDomainRequest&&s){r=new XDomainRequest;if(r){r.onload=function(){n.success.call(n.context,r.responseText);n.complete.call(n.context,r.responseText);a.resolve(r.responseText,r.statusText,r)};r.onerror=function(){n.error.call(n.context,"",new Error("unable to make xhr request."));n.complete.call(n.context,"");a.reject(r,r.statusText)};r.onprogress=n.progress;r.timeout=n.timeout;r.open(n.method,t)}else{n.error.call(n.context,"",new Error("unable to make xhr request."))}}else{r.onreadystatechange=function(){if(r.readyState!=4)return;if(r.status>=200&&r.status<300||r.status==304){n.success.call(n.context,r.responseText,r.getResponseHeader("Content-Type"));n.complete.call(n.context,r.responseText,r.getResponseHeader("Content-Type"));a.resolve(r.responseText,r.statusText,r)}else if(r.status>=400){n.error.call(n.context,r.responseText,new Error(r.status));n.complete.call(n.context,r.responseText,new Error(r.status));a.reject(r,r.statusText)}};r.onprogress=n.progress;r.open(n.method,n.url,true);r.timeout=n.timeout;if(n.method=="POST"){var f=n.headers;for(u in f){r.setRequestHeader(u,f[u])}}}r.send(n.method=="POST"?n.data:null);if(n.timeout>0){o=setTimeout(timeoutHandler,n.timeout)}return a.promise(r)}};t(e.Scout);if(typeof e.define!=="undefined"&&e.define!==null?e.define.amd:void 0){require(["scout"],function(e){t(e)});return{success:true}}})(window);(function(e){function t(e,t,n){if(n instanceof Array){n.forEach(function(n){n.apply(e,t)});n.length=0}}e.Deferred=function(n){function i(e,t){e=e||[];for(var n=0;n<t.length;n++){var r=t[n];if(typeof r==="function")e.push(r);else if(r instanceof Array||typeof r==="object"&&typeof r.length==="number"){i(e,r)}}return e}function s(e,t,n){if(typeof t==="function"){return function(){var r=Array.prototype.slice.call(arguments);var i=t.apply(n,arguments);r=i!==null&&typeof i!=="undefined"?[i]:r;e.apply(null,r)}}else{return e}}if(!(this instanceof e.Deferred)){return new e.Deferred}this._state=0;var r=this;r._promise={_promise:true,always:function(){this.done(arguments);this.fail(arguments);return this},done:function(){r._done=i(r._done,arguments);if(r._state===1){t(r._scope||r,r._args,r._done)}return this},fail:function(){r._fail=i(r._fail,arguments);if(r._state===2){t(r._scope||r,r._args,r._fail)}return this},progress:function(){r._progress=i(r._progress,arguments);return this},isRejected:function(){return r._state===2},isResolved:function(){return r._state===1},state:function(){switch(r._state){case 0:return"pending";case 1:return"resolved";case 2:return"rejected"}},then:function(t,n,i){var o=new e.Deferred;this.done(s(o.resolve.bind(o),t,r));this.fail(s(o.reject.bind(o),n,r));this.progress(s(o.notify.bind(o),i,r));return o.promise()},promise:function(){return this}};this._promise.prototype={constructor:e.Deferred};if(typeof n==="function"){n.call(this,this)}};e.Deferred.prototype={resolve:function(){if(this._state>0)return;this._state=1;this._args=Array.prototype.slice.call(arguments);this._args.push(this._promise);t(this._scope||this._promise,this._args,this._done)},resolveWith:function(e){if(this._state>0)return;this._scope=e;this.resolve.apply(this,Array.prototype.slice.call(arguments,1))},reject:function(){if(this._state>0)return;this._state=2;this._args=Array.prototype.slice.call(arguments);this._args.push(this._promise);t(this._scope||this._promise,this._args,this._fail)},rejectWith:function(e){if(this._state>0)return;this._scope=e;this.reject.apply(this,Array.prototype.slice.call(arguments,1))},notify:function(){var e=Array.prototype.slice.call(arguments);e.push(this._promise);t(this._promise,e,this._progress)},notifyWith:function(e){var n=Array.prototype.slice.call(arguments,1);n.push(this._promise);t(e,n,this._progress)},promise:function(t){if(typeof t==="object"){return this._promise=e.extend(t,this._promise)}return this._promise}};e.when=function(){if(arguments.length<2){var t=arguments[0];if(typeof t.promise==="function"){return t.promise()}else{var n=new e.Deferred;n.resolve(t);return n.promise()}}var r=new e.Deferred,i=0,s=[[]];var o=r.reject.bind(r);for(var u=0;u<arguments.length;u++){var a=arguments[u];if(typeof a.promise==="function"){a=a.promise();s[0][u]=a;i++;(function(e){a.done(function(){s[e+1]=Array.prototype.slice.apply(arguments);if(!--i){r.resolveWith.apply(r,s)}})})(u);a.fail(o)}}return r.promise()};e.fn.promise=function(t){var n=[],r=typeof t==="string",i=0,s=new e.Deferred,o=this;this.each(function(u){var a=e.data(u,"_defer");if(!a)return;for(var f in a){if(r&&t!==f)continue;for(var l in a[f]){var c=a[f][l];if(n.indexOf(c)<0){i++;n.push(c);c.promise().done(function(){if(!--i)s.resolveWith(o,o)})}}}});return s.promise()};e.register()})(Scout);(function(e){e.trigger=function(t,n,r,i){r=r||{};i=i||{bubbles:true,cancelable:true};var s;if(document.createEvent){s=document.createEvent("Event");s.initEvent(n,i.bubbles,i.cancelable);e.extend(s,r);t.dispatchEvent(s)}};e.fn.trigger=function(t,n,r){this.each(function(i){e.trigger(i,t,n,r)});return this};e.fn.bind=function(e,t){this.each(function(n){n.addEventListener(e,t)});return this};e.fn.unbind=function(e,t){this.each(function(n){n.removeEventListener(e,t)});return this};e.fn.on=function(e,t,n){if(typeof t==="string"){this.delegate(t,e,n)}else{this.bind(e,t)}return this};e.fn.one=function(e,t,n){var r=this;var i=function(s){n(s);r.off(e,t,i)};if(typeof t==="string"){return r.on(e,t,i)}else{n=t;t=i;return r.on(e,i)}};e.fn.off=function(e,t,n){if(typeof t==="string"){this.undelegate(t,e,n)}else{n=t;this.unbind(e,n)}return this};var t="_delegate";e.fn.delegate=function(n,r,i){var s=this;this.each(function(o){var u=e.data(o,t)||e.data(o,t,[]);var a=function(e){var t=s.find(n);if(t.indexOf(e.target)>=0){i.call(e.target,e)}};u.push({sel:n,cb:i,d:a});o.addEventListener(r,a)});return this};e.fn.undelegate=function(n,r,i){this.each(function(s){var o=e.data(s,t);if(o){for(var u=0;u<o.length;u++){if(o[u].sel===n&&o[u].cb===i){s.removeEventListener(r,o[u].d);o.splice(u,1);return}}}});return this};e.register()})(Scout);(function(e){var t="transitionend",n=e.vendorStyle("transition");switch(n){case"-webkit-transition":t="webkitTransitionEnd";break;case"-ms-transition":t="MSTransitionEnd";break}e.fn.animate=function(n,r,i){function f(){var s=this.length;var f=this;this.each(function(l,h,p){var d=" "+r+"s "+i.ease+" "+i.delay+"s",v=[],m;v["transition"]="all"+d;for(var g in n)v[g]=n[g];e(l).css(v);m=function(){this.removeEventListener(t,m,false);e(l).css(o);var n=e.data(l,u)["fx"];n.splice(n.indexOf(a),1);if(--s==0){a.resolve(f);i.complete.call(l)}};l.addEventListener(t,m,false)})}var s={ease:"ease-out",delay:0,complete:function(){},rAF:false},o={};o["transition-property"]="";o["transition-duration"]="";o["transition-timing-function"]="";o["transition-delay"]="";o["animation-name"]="";o["animation-duration"]="";r=r||.3;i=i||s;i=e.automap(s,i);var u="_defer";var a=new e.Deferred;this.each(function(t){var n=e.data(t,u)||e.data(t,u,{});n=n["fx"]=n["fx"]||[];n.push(a)});e.defer(this,f);return a}})(Scout);(function(e,t,n){function s(e){if(e&&typeof e.preventDefault==="function")e.preventDefault()}var r={tapThreshold:25,dragThreshold:5,swipeThreshold:50,swipeTolerance:.85,scaleThreshold:.05,rotateThreshold:5,holdTimeout:1};var i=null;e.touch={config:function(t){e.extend(r,t)},registerDriver:function(s,o){if(!i&&o(e,r,t,n)){i=s}},driver:function(){return i},isMultiTouch:function(){switch(this.driver()){case"mouse":return false;case"msft":return n.navigator.msMaxTouchPoints>=2;default:return true}}};e.fn.disableTouchScroll=function(){this.each(function(e){e.addEventListener("touchmove",s)});this.css("-ms-touch-action","none")};e.fn.enableTouchScroll=function(){this.each(function(e){e.removeEventListener("touchmove",s)});$el.css("-ms-touch-action","auto")};e.register()})(Scout,document,window);$.touch.registerDriver("msft",function(e,t,n,r){function a(e,t){var n={target:e.target,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,distance:0,id:e.pointerId,deltaX:0,deltaY:0,distanceSquared:0,distance:function(){return Math.sqrt(this.distanceSquared)},originalEvent:e};if(t){n.deltaX=n.clientX-t.clientX;n.deltaY=n.clientY-t.clientY;n.distanceSquared=n.deltaX*n.deltaX+n.deltaY*n.deltaY}return n}function l(e,t){var n=e.translationX,r=e.translationY;t.deltaX+=n;t.deltaY+=r;t.screenX+=n;t.screenY+=r;t.clientX+=n;t.clientY+=r;t.distanceSquared=t.deltaX*t.deltaX+t.deltaY*t.deltaY;t.scale*=e.scale;t.rotation+=e.rotation*f;return t}function c(n){if(!i)return;i.gesture&&(i.gesture=l(n,i.gesture));var r=i.gesture;var s=e(i.start.target);switch(n.type){case"MSGestureStart":r=i.gesture={scale:1,rotation:0};e.extend(r,i.current);break;case"MSGestureTap":s.trigger("tap",i.start);h();break;case"MSGestureHold":s.trigger("hold",i.start);h();break;case"MSGestureChange":var o=r.deltaX,a=r.deltaY,f=t.swipeThreshold;if(!i.isScaling&&!i.isRotating&&!i.swipe&&u==1&&(Math.abs(o)>=f||Math.abs(a)>=f)){var c=r.distance();o/=c;a/=c;var p=t.swipeTolerance;if(o>=p)i.swipe="right";else if(o<=-p)i.swipe="left";else if(a>=p)i.swipe="down";else if(a<=-p)i.swipe="up";if(i.swipe){r.direction=i.swipe;s.trigger("swipe",r);h()}}if(i.isRotating||Math.abs(r.rotation)>=t.rotateThreshold){s.trigger(i.isRotating?"rotate":"rotatestart",r);i.isRotating=true}if(i.isScaling||Math.abs(r.scale-1)>=t.scaleThreshold){s.trigger(i.isScaling?"scale":"scalestart",r);i.isScaling=true}break}}function h(){if(s){s.stop();for(var e in o){n.removeEventListener(o[e],c);s.target.removeEventListener(o[e],c)}s=null;u=0}}if(!("onmspointerdown"in n)||!("MSGesture"in r))return false;var i=null,s=null,o=["MSGestureTap","MSGestureHold","MSGestureStart","MSGestureChange"],u=0;var f=180/Math.PI;n.addEventListener("MSPointerDown",function(t){i={start:a(t)};i.current=i.start;e(t.target).trigger("pointerdown",i.start);if(!s){s=new MSGesture;s.target=n.body;for(var r in o){s.target.addEventListener(o[r],c)}}u++;s.addPointer(t.pointerId)});n.addEventListener("MSPointerMove",function(n){if(!i||n.pointerId!=i.start.id)return;i.current=a(n,i.start);var r=e(i.start.target);r.trigger("pointermove",i.current);if(i.isDragging||i.current.distanceSquared>t.dragThreshold*t.dragThreshold){i.isDragging=true;r.trigger(i.isDragging?"drag":"dragstart",i.current);var s=i.current.deltaX,o=i.current.deltaY;var u=t.swipeThreshold}});n.addEventListener("MSPointerUp",function(t){if(!i)return;i.current=a(t,i.start);var n=e(i.start.target);if(i.isDragging)n.trigger("dragend",i.current);if(i.isRotating)n.trigger("rotateend",i.current);if(i.isScaling)n.trigger("scaleend",i.current);n.trigger("pointerup",i.current);h();i=null});return true});$.touch.registerDriver("apple",function(e,n,r){function s(e,n){if(n){for(var r=0;r<e.changedTouches.length;r++){if(e.changedTouches[r].identifier==n.id){t=e.changedTouches[r];break}}}else t=e.changedTouches[0];if(!t)return;var i={target:t.target,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,distance:0,id:t.identifier,distance:function(){return Math.sqrt(this.distanceSquared)},originalEvent:e};if(n){i.deltaX=i.clientX-n.clientX;i.deltaY=i.clientY-n.clientY;i.distanceSquared=i.deltaX*i.deltaX+i.deltaY*i.deltaY}return i}function u(){if(!i)return;e(i.start.target).trigger("hold",i.current);o=null;i.isHold=true}function f(e){return{target:e.target,scale:e.scale,rotation:e.rotation}}if(!("ontouchstart"in r))return false;var i=null;var o=null;r.addEventListener("touchstart",function(t){var r=s(t);if(r&&t.touches.length==1){i={start:s(t)};i.current=i.start;e(t.target).trigger("pointerdown",i.start);o=window.setTimeout(u,n.holdTimeout*1e3)}});r.addEventListener("touchmove",function(t){if(!i||!(i.current=s(t,i.start)))return;if(t.touches.length!=1){i=null;return}var r=e(i.start.target);r.trigger("pointermove",i.current);if(i.current.distanceSquared>=n.tapThreshold*n.tapThreshold){window.clearTimeout(o);o=null}if(i.isDragging||i.current.distanceSquared>=n.dragThreshold*n.dragThreshold){r.trigger(i.isDragging?"drag":"dragstart",i.current);i.isDragging=true;var u=i.current.deltaX,a=i.current.deltaY;var f=n.swipeThreshold;if(!i.swipe&&(Math.abs(u)>=f||Math.abs(a)>=f)){var l=i.current.distance();u/=l;a/=l;var c=n.swipeTolerance;if(u>=c)i.swipe="right";else if(u<=-c)i.swipe="left";else if(a>=c)i.swipe="down";else if(a<=-c)i.swipe="up";if(i.swipe){i.current.direction=i.swipe;r.trigger("swipe",i.current)}}}});r.addEventListener("touchend",function(t){if(!i||!(i.current=s(t,i.start)))return;var r=e(i.start.target);if(i.isDragging)r.trigger("dragend",i.current);r.trigger("pointerup",i.current);if(t.touches.length==0&&i.current.distanceSquared<=n.tapThreshold*n.tapThreshold&&!i.swipe&&!i.isHold){r.trigger("tap",i.current)}window.clearTimeout(o);o=null;i=null});var a=null;r.addEventListener("gesturestart",function(e){a={start:f(e)}});r.addEventListener("gesturechange",function(t){if(!a)return;a.current=f(t,a.start);var r=e(t.target);if(a.isScaling||Math.abs(a.current.scale-1)>=n.scaleThreshold){r.trigger(a.isScaling?"scale":"scalestart",a.current);a.isScaling=true}if(a.isRotating||Math.abs(a.current.rotation)>=n.rotateThreshold){r.trigger(a.isRotating?"rotate":"rotatestart",a.current);a.isRotating=true}});r.addEventListener("gestureend",function(t){a.current=f(t,a.start);var n=e(t.target);if(a.isScaling)n.trigger("scaleend",a.current);if(a.isRotating)n.trigger("rotateend",a.current);a=null});return true});$.touch.registerDriver("mouse",function(e,t,n){function i(e,t){var n={target:e.target,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,distanceSquared:0,distance:function(){return Math.sqrt(this.distanceSquared)},originalEvent:e};if(t){n.deltaX=n.clientX-t.clientX;n.deltaY=n.clientY-t.clientY;n.distanceSquared=n.deltaX*n.deltaX+n.deltaY*n.deltaY}return n}function o(){if(!r)return;e(r.start.target).trigger("hold",r.current);window.clearTimeout(s);s=null;r.isHold=true}if(!("onmousedown"in n))return false;var r=null;var s=null;n.addEventListener("mousedown",function(n){r={start:i(n)};r.current=r.start;e(n.target).trigger("pointerdown",r.start);s=window.setTimeout(o,t.holdTimeout*1e3)});n.addEventListener("mousemove",function(n){if(!r)return;r.current=i(n,r.start);var o=e(r.start.target);o.trigger("pointermove",r.current);if(s&&r.current.distanceSquared>=t.tapThreshold*t.tapThreshold){window.clearTimeout(s);s=null}if(r.isDragging||r.current.distanceSquared>t.dragThreshold*t.dragThreshold){o.trigger(r.isDragging?"drag":"dragstart",r.current);r.isDragging=true;var u=r.current.deltaX,a=r.current.deltaY;var f=t.swipeThreshold;if(!r.swipe&&(Math.abs(u)>=f||Math.abs(a)>=f)){var l=r.current.distance();u/=l;a/=l;var c=t.swipeTolerance;if(u>=c)r.swipe="right";else if(u<=-c)r.swipe="left";else if(a>=c)r.swipe="down";else if(a<=-c)r.swipe="up";if(r.swipe){r.current.direction=r.swipe;o.trigger("swipe",r.current)}}}});n.addEventListener("mouseup",function(t){if(!r)return;r.current=i(t,r.start);var n=e(r.start.target);if(r.isDragging)n.trigger("dragend",r.current);n.trigger("pointerup",r.current);if(r.start.target===t.target&&!r.swipe&&!r.isHold)n.trigger("tap",r.current);if(s){window.clearTimeout(s);s=null}r=null});return true})